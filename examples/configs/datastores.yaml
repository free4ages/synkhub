# DataStores Configuration
# This file contains centralized database connection information
# Use environment variables for sensitive data like passwords and secrets

datastores:
  # Local PostgreSQL instance for development
  local_postgres:
    type: 'postgres'
    description: 'Local PostgreSQL database for development and testing'
    tags: ['development', 'postgres', 'local']
    connection:
      host: '${POSTGRES_HOST:localhost}'
      port: ${POSTGRES_PORT:5432}
      user: '${POSTGRES_USER:rohitanand}'
      password: '${POSTGRES_PASSWORD:}'
      dbname: '${POSTGRES_DB:synctool}'
      schema: 'public'
      max_connections: 10
      min_connections: 1

  # Production PostgreSQL instance
  prod_postgres:
    type: 'postgres'
    description: 'Production PostgreSQL database'
    tags: ['production', 'postgres', 'primary']
    connection:
      host: '${PROD_POSTGRES_HOST:prod-db.example.com}'
      port: ${PROD_POSTGRES_PORT:5432}
      user: '${PROD_POSTGRES_USER:prod_user}'
      password: '${PROD_POSTGRES_PASSWORD}'
      dbname: '${PROD_POSTGRES_DB:prod_synctool}'
      schema: 'public'
      max_connections: 20
      min_connections: 2

  # Analytics PostgreSQL instance
  analytics_postgres:
    type: 'postgres'
    description: 'PostgreSQL database for analytics and reporting'
    tags: ['analytics', 'postgres', 'readonly']
    connection:
      host: '${ANALYTICS_POSTGRES_HOST:analytics-db.example.com}'
      port: ${ANALYTICS_POSTGRES_PORT:5432}
      user: '${ANALYTICS_POSTGRES_USER:analytics_user}'
      password: '${ANALYTICS_POSTGRES_PASSWORD}'
      dbname: '${ANALYTICS_POSTGRES_DB:analytics}'
      schema: 'public'
      max_connections: 15
      min_connections: 1

  # MySQL instance
  mysql_main:
    type: 'mysql'
    description: 'Main MySQL database'
    tags: ['mysql', 'primary']
    connection:
      host: '${MYSQL_HOST:localhost}'
      port: ${MYSQL_PORT:3306}
      user: '${MYSQL_USER:mysql_user}'
      password: '${MYSQL_PASSWORD}'
      database: '${MYSQL_DB:synctool_mysql}'
      max_connections: 10
      min_connections: 1

  # ClickHouse instance
  clickhouse_analytics:
    type: 'clickhouse'
    description: 'ClickHouse for high-performance analytics'
    tags: ['clickhouse', 'analytics', 'olap']
    connection:
      host: '${CLICKHOUSE_HOST:localhost}'
      port: ${CLICKHOUSE_PORT:9000}
      user: '${CLICKHOUSE_USER:default}'
      password: '${CLICKHOUSE_PASSWORD}'
      database: '${CLICKHOUSE_DB:analytics}'
      max_connections: 5
      min_connections: 1

  # DuckDB instance
  local_duckdb:
    type: 'duckdb'
    description: 'Local DuckDB for development and testing'
    tags: ['duckdb', 'local', 'embedded']
    connection:
      database: '${DUCKDB_PATH:./data/synctool.duckdb}'
      max_connections: 1
      min_connections: 1

  # S3 Object Storage
  s3_data_lake:
    type: 'object_storage'
    description: 'S3 bucket for data lake storage'
    tags: ['s3', 'object_storage', 'data_lake']
    connection:
      s3_bucket: '${S3_BUCKET:synctool-data-lake}'
      s3_prefix: '${S3_PREFIX:synctool/}'
      aws_access_key_id: '${AWS_ACCESS_KEY_ID}'
      aws_secret_access_key: '${AWS_SECRET_ACCESS_KEY}'
      region: '${AWS_REGION:us-east-1}'

  # MinIO Object Storage (S3-compatible)
  minio_storage:
    type: 'object_storage'
    description: 'Local MinIO storage for development'
    tags: ['minio', 'object_storage', 'local', 's3_compatible']
    connection:
      host: '${MINIO_HOST:localhost}'
      port: ${MINIO_PORT:9000}
      s3_bucket: '${MINIO_BUCKET:synctool}'
      s3_prefix: '${MINIO_PREFIX:data/}'
      aws_access_key_id: '${MINIO_ACCESS_KEY:minioadmin}'
      aws_secret_access_key: '${MINIO_SECRET_KEY:minioadmin}'
      region: '${MINIO_REGION:us-east-1}'
